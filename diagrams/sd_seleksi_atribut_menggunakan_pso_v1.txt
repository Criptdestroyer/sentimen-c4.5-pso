@startuml
hide footbox
title Seleksi Atribut menggunakan PSO\n

actor Peneliti
boundary AppWindow
control MainControl
control C45
control PSO
entity "db : Database"

activate Peneliti
Peneliti -> AppWindow : optimizeModel()
activate AppWindow
AppWindow -> MainControl : optimizeModel(pSize, popSize, \nnumIter, c1, c2, target)
activate MainControl

loop i < k
MainControl -> C45 : optimize(pSize, popSize, \nnumIter, c1, c2, target)
activate C45
C45 -> C45 : retrieveAttributes()
activate C45

alt len(attributes) <= 0
C45 -> "db : Database" : select("attributes where fold number = i")
activate "db : Database"
"db : Database" --> C45 : attributes
deactivate "db : Database"
else
C45 -> C45 : constructAttributes()
end
deactivate C45

create PSO
C45 -> PSO : << PSO(pSize, popSize, \nnumIter, c1, c2, target) >>
activate PSO
PSO -> PSO : initializePopulation()
activate PSO
PSO --> PSO : initialPopulation
deactivate PSO
C45 -> PSO : searchBestSolution()

loop numIter

loop popSize
PSO -> C45 : buildTree(filteredAttributes)
activate C45
C45 --> PSO : particleBest
deactivate C45
end

loop popSize
PSO -> PSO : updateParticle(particle)
activate PSO

loop d in pSize
PSO -> PSO : calculateVelocity(x, v, f, d)
activate PSO
PSO --> PSO : newVelocity
deactivate PSO

PSO -> PSO : updatePosition(velocity)
activate PSO
PSO -> PSO : sigmoid(velocity)
activate PSO

alt sigmoid > r3
PSO --> PSO : 1
else
PSO --> PSO : 0
end
deactivate PSO

PSO --> PSO : newPosition
deactivate PSO
end

PSO --> PSO : newParticle
deactivate PSO
end

break particleBest >= target
PSO --> C45 : bestParticle
end
end

PSO --> C45 : bestParticle
deactivate PSO
C45 --> MainControl : optimizedAccuracy
MainControl --> AppWindow : optimizedAccuracy
end
@enduml